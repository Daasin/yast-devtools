
## initialize
@YAST2-INIT-COMMON@
@YAST2-INIT-PROGRAM@
@YAST2-INIT-YCP@

YAST2DEVTOOLS=${ydatadir}/devtools
AC_SUBST(YAST2DEVTOOLS)

YCPDOC=${srcdir}/ycpdoc/src/ycpdoc
AC_SUBST(YCPDOC)

## some common checks
@YAST2-CHECKS-COMMON@
@YAST2-CHECKS-PROGRAM@
#@YAST2-CHECKS-YCP@

# sgml checks
AC_PATH_PROG(SGML2HTML, sgml2html, false)
if test "$SGML2HTML" = "false"; then
	AC_MSG_ERROR([sgmltool not installed])
	exit
fi

AC_PATH_PROG(SGML2TXT,   sgml2txt,   false)
AC_PATH_PROG(SGML2INFO,  sgml2info,  false)
AC_PATH_PROG(SGML2LATEX, sgml2latex, false)

# perl checks
AC_CHECK_PROG(PERL, perl, perl, no)

AC_DEFUN([CHECK_PERL_MODULE],[
AC_MSG_CHECKING([for perl module $1])
TMPFILE=conftest.pl
rm -f $TMPFILE
cat >$TMPFILE <<'EOT'
use $1;
EOT
$PERL $TMPFILE 2> /dev/null
if test $? -eq 0 ; then
    $2="true"
    AC_MSG_RESULT(found)
else
    $2="false"
    AC_MSG_RESULT(not found)
fi
rm -f $TMPFILE
])

CHECK_PERL_MODULE(XML::Writer, XMLWRITER)
if test "$XMLWRITER" = "false"; then
	AC_MSG_ERROR([perl xml writer not installed])
	exit
fi

## and generate the output
AC_OUTPUT(devtools/bin/version)
@YAST2-OUTPUT@

@HEADER-COMMENT@ 

@HEADER@
BuildRequires:	docbook-xsl-stylesheets gcc-c++ libxslt perl-XML-Writer sgml-skel pkgconfig
Requires:	perl
Requires:	perl-XML-Writer
Requires:       libxslt
# we install our .pc under $prefix/share
Requires:	pkgconfig >= 0.16
Requires:	automake autoconf
Requires:	gettext-tools
Recommends:	cmake
# /usr/lib/YaST2/bin/ydoxygen needs it
Recommends:	doxygen
# for svn builds of binary packages
Recommends:	libtool
Provides:	ycpdoc ydoc
Obsoletes:	ycpdoc ydoc
Provides:	yast2-config-newmodule yast2-trans-newmodule
Obsoletes:	yast2-config-newmodule yast2-trans-newmodule

Summary:	YaST2 development tools

BuildArchitectures: noarch

%description
-

@PREP@

%build
autoreconf --force --install

%{?suse_update_config:%{suse_update_config -f}}
./configure --prefix=%{prefix} --libdir=%{_libdir}
make

@INSTALL@

# Change false to true in the following line when yast2 core is broken
false && cat > "$RPM_BUILD_ROOT/@ydatadir@/devtools/NO_MAKE_CHECK" <<EOF
When yast2 core is broken and the interpreter does not work,
submitting yast2-devtools with the flag file existing will
prevent ycp developers being flooded by testsuite failures.
EOF

@CLEAN@

%files
%defattr(-,root,root)
%{prefix}/bin/y2tool
%{prefix}/bin/yastdoc
%dir %{prefix}/share/emacs
%dir %{prefix}/share/emacs/site-lisp
%{prefix}/share/emacs/site-lisp/*ycp-mode.el
%dir %{prefix}/share/vim
%dir %{prefix}/share/vim/site
%dir %{prefix}/share/vim/site/syntax
%{prefix}/share/vim/site/syntax/ycp.vim
%dir %{prefix}/share/vim/site/ftdetect
%{prefix}/share/vim/site/ftdetect/ycp_filetype.vim
%dir %{prefix}/lib/YaST2
%{prefix}/share/cmake
@ybindir@
%dir %{prefix}/share/YaST2
@ydatadir@
%{prefix}/share/aclocal/*.m4
@pkgconfigdatadir@/@RPMNAME@.pc
%doc @docdir@
